{
  "name": "Kimi Marketing Agent (Free)",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 24
            }
          ]
        }
      },
      "id": "trigger",
      "name": "Daily Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [0, 0]
    },
    {
      "parameters": {
        "url": "https://www.google.com/search",
        "queryParameters": {
          "q": "best AI marketing agencies in New York",
          "num": 10
        }
      },
      "id": "serp",
      "name": "Google SERP",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [200, 0]
    },
    {
      "parameters": {
        "functionCode": "const domains = items[0].json.results?.match(/https?:\\/\\/([^\\/]+)/g)?.map(u => new URL(u).hostname) || [];\nconst results = [];\nfor (const d of [...new Set(domains)]) {\n  ['contact', 'hello', 'info'].forEach(prefix => {\n    results.push({ domain: d, email: `${prefix}@${d}` });\n  });\n}\nreturn results.map(r => ({ json: r }));"
      },
      "id": "guess",
      "name": "Guess Emails",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [400, 0]
    },
    {
      "parameters": {
        "url": "https://api.moonshot.cn/v1/chat/completions",
        "method": "POST",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "model": "kimi-latest",
          "messages": [
            {
              "role": "user",
              "content": "Write a 3-sentence cold email to {{ $json.domain }} asking if they need AI-driven marketing automation."
            }
          ]
        },
        "options": {}
      },
      "id": "kimi",
      "name": "Kimi K2",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [600, 0]
    },
    {
      "parameters": {
        "operation": "send",
        "to": "={{ $json.email }}",
        "subject": "Quick question about {{ $json.domain }}",
        "text": "={{ $json.choices[0].message.content }}"
      },
      "id": "gmail",
      "name": "Gmail Send",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2,
      "position": [800, 0]
    },
    {
      "parameters": {
        "operation": "append",
        "sheetId": "YOUR_SHEET_ID",
        "range": "A:Z",
        "options": {}
      },
      "id": "sheets",
      "name": "Google Sheets Log",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4,
      "position": [1000, 0]
    }
  ],
  "connections": {
    "trigger": { "main": [[{ "node": "serp", "type": "main", "index": 0 }]] },
    "serp": { "main": [[{ "node": "guess", "type": "main", "index": 0 }]] },
    "guess": { "main": [[{ "node": "kimi", "type": "main", "index": 0 }]] },
    "kimi": { "main": [[{ "node": "gmail", "type": "main", "index": 0 }]] },
    "gmail": { "main": [[{ "node": "sheets", "type": "main", "index": 0 }]] }
  },
  "active": false,
  "settings": {},
  "versionId": "1.0.0",
  "meta": {
    "templateCredsSetup": true
  }
}
